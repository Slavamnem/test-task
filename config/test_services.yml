services:
  _defaults:
    autowire: true
    autoconfigure: true

  App\:
    resource: '../src/*/*'

  Symfony\Component\Console\Application:
    # why public? so we can get it from container in bin file
    # via "$container->get(Application::class)"
    public: true

  App\Service\CommissionCalculationService:
    public: true
  App\Service\TransactionReader\TransactionFileReader:
    public: true

  App\Service\MoneyCalculator\MoneyCalculatorInterface: '@App\Service\MoneyCalculator\MoneyBCMathCalculator'
  App\Service\MoneyCalculator\MoneyBCMathCalculator:
    arguments:
      $precision: '%env(MONEY_PRECISION)%'

  App\Http\ExchangeRatesHttpInterface: '@App\Http\ExchangeRatesHttpTestProxy'
  App\Http\ExchangeRatesHttp:
    arguments:
      $exchangeRatesApiUrl: '%env(EXCHANGE_RATES_API_URL)%'
